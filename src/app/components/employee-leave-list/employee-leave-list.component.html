<!-- leave-requests.component.html -->
<div class="leave-container">
    <div class="header-controls">
      <h2>รายการการขอลางาน</h2>
      <div class="controls">
        <label>ประเภทการลา:
          <select [(ngModel)]="selectedType" (change)="filterRequests()">
            <option value="">ทั้งหมด</option>
            <option *ngFor="let type of leaveTypes" [value]="type">{{ type }}</option>
          </select>
        </label>
        <button (click)="exportToPDF()">Export PDF</button>
      </div>
    </div>
  
    <table *ngIf="filteredRequests.length > 0">
      <thead>
        <tr>
          <th>#</th>
          <th>ชื่อพนักงาน</th>
          <th>ประเภท</th>
          <th>เริ่ม</th>
          <th>สิ้นสุด</th>
          <th>สถานะ</th>
          <th>ดำเนินการ</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let leave of filteredRequests; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ leave.employeeName }}</td>
          <td>{{ leave.type }}</td>
          <td>{{ leave.startDate }}</td>
          <td>{{ leave.endDate }}</td>
          <td>{{ leave.status }}</td>
          <td><button (click)="openModal(leave)">ดูรายละเอียด</button></td>
        </tr>
      </tbody>
    </table>
    <p *ngIf="filteredRequests.length === 0">ไม่มีข้อมูลการลางาน</p>
  
    <!-- Modal -->
    <div class="modal-backdrop" *ngIf="selectedRequest">
      <div class="modal">
        <h3>รายละเอียดการลา</h3>
        <p><strong>ชื่อ:</strong> {{ selectedRequest.employeeName }}</p>
        <p><strong>ประเภท:</strong> {{ selectedRequest.type }}</p>
        <p><strong>ช่วงเวลา:</strong> {{ selectedRequest.startDate }} - {{ selectedRequest.endDate }}</p>
        <p><strong>เหตุผล:</strong> {{ selectedRequest.reason }}</p>
        <p><strong>สถานะ:</strong> {{ selectedRequest.status }}</p>
        <button (click)="closeModal()">ปิด</button>
      </div>
    </div>
  </div>