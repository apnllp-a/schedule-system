<!-- schedule-pattern-list.component.html -->
<div class="pattern-list">
    <h2>‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</h2>
  
    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° -->
    <div class="actions">
      <button class="btn-add" (click)="openAddModal()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</button>
    </div>
  
    <!-- Modal Popup -->
    <div class="modal-backdrop" *ngIf="showAddModal">
      <div class="modal">
        <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</h3>
        <form #addForm="ngForm" (ngSubmit)="submitAdd(addForm)">
          <div class="form-group">
            <label>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</label>
            <input name="name" [(ngModel)]="newPattern.name" required />
          </div>
          <div class="form-group inline">
            <label>
              <input type="checkbox"
                     name="weekly"
                     [(ngModel)]="newPattern.weekly"
                     (change)="onWeeklyToggle()" />
              Weekly
            </label>
          </div>
  
          <div *ngIf="newPattern.weekly" class="working-days">
            <div *ngFor="let wd of newPattern.workingDays; let i = index" class="day-row">
              <label>{{ wd.day }}</label>
              <input type="time" [(ngModel)]="wd.startTime" name="start{{i}}" required />
              <span>‚Äì</span>
              <input type="time" [(ngModel)]="wd.endTime"   name="end{{i}}"   required />
            </div>
          </div>
  
          <div class="modal-actions">
            <button type="button" (click)="closeAddModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button type="submit" [disabled]="addForm.invalid">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          </div>
        </form>
      </div>
    </div>
  
    <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Loading / Error -->
    <div *ngIf="loading" class="status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
    <div *ngIf="!loading && error" class="status error">{{ error }}</div>
  
    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
    <table *ngIf="!loading && !error">
        <thead>
          <tr>
            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</th>
            <th *ngFor="let d of days">{{ d }}</th>
            <th>‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</th>
            <th>Actions</th>           <!-- ‚Üê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="patterns.length === 0">
            <!-- colspan ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô days.length + 3 -->
            <td [attr.colspan]="days.length + 3" class="no-data">‚Äî ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Äî</td>
          </tr>
          <tr *ngFor="let p of patterns">
            <td>{{ p.name }}</td>
            <td *ngFor="let d of days">{{ getTime(p, d) }}</td>
            <td>{{ p.weekly ? '‚úîÔ∏è' : '‚ùå' }}</td>
            <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå Actions ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏ó‡∏≠‡∏î‡πÉ‡∏ô TS -->
            <td class="actions-cell">
              <button class="btn-edit" (click)="openEditModal(p)">‚úèÔ∏è</button>
              <button class="btn-delete" (click)="deletePattern(p._id)">üóëÔ∏è</button>
            </td>
          </tr>
        </tbody>
      </table>
  </div>
  